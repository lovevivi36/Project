import{j as e,F as V,P as Y,A as J,m as Q,p as U,i as X}from"./ui-vendor-k1DUerhC.js";import{r as o}from"./react-vendor-DrRc5Ab8.js";import{o as E,R as Z,u as _,W as ee,p as ae,q as te,r as se,T as re,v as le,w as C,P as oe,O as ne,x as ie,m as x,y as R,z as ce,D as de,e as ue,B as v,a as pe,b as me,c as ge,d as xe,I as fe,t as D,A as y}from"./index-BmCEqgsS.js";import{L as b}from"./label-DOw6Vck2.js";var ve=Symbol("radix.slottable");function he(a){const t=({children:r})=>e.jsx(e.Fragment,{children:r});return t.displayName=`${a}.Slottable`,t.__radixId=ve,t}var P="AlertDialog",[je]=ae(P,[E]),c=E(),T=a=>{const{__scopeAlertDialog:t,...r}=a,l=c(t);return e.jsx(Z,{...l,...r,modal:!0})};T.displayName=P;var De="AlertDialogTrigger",Ae=o.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,n=c(r);return e.jsx(ie,{...n,...l,ref:t})});Ae.displayName=De;var Ne="AlertDialogPortal",O=a=>{const{__scopeAlertDialog:t,...r}=a,l=c(t);return e.jsx(oe,{...l,...r})};O.displayName=Ne;var ye="AlertDialogOverlay",I=o.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,n=c(r);return e.jsx(ne,{...n,...l,ref:t})});I.displayName=ye;var h="AlertDialogContent",[be,we]=je(h),Se=he("AlertDialogContent"),$=o.forwardRef((a,t)=>{const{__scopeAlertDialog:r,children:l,...n}=a,d=c(r),u=o.useRef(null),p=_(t,u),f=o.useRef(null);return e.jsx(ee,{contentName:h,titleName:k,docsSlug:"alert-dialog",children:e.jsx(be,{scope:r,cancelRef:f,children:e.jsxs(te,{role:"alertdialog",...d,...n,ref:p,onOpenAutoFocus:se(n.onOpenAutoFocus,i=>{var m;i.preventDefault(),(m=f.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:i=>i.preventDefault(),onInteractOutside:i=>i.preventDefault(),children:[e.jsx(Se,{children:l}),e.jsx(_e,{contentRef:u})]})})})});$.displayName=h;var k="AlertDialogTitle",M=o.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,n=c(r);return e.jsx(re,{...n,...l,ref:t})});M.displayName=k;var F="AlertDialogDescription",L=o.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,n=c(r);return e.jsx(le,{...n,...l,ref:t})});L.displayName=F;var Ee="AlertDialogAction",z=o.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,n=c(r);return e.jsx(C,{...n,...l,ref:t})});z.displayName=Ee;var B="AlertDialogCancel",G=o.forwardRef((a,t)=>{const{__scopeAlertDialog:r,...l}=a,{cancelRef:n}=we(B,r),d=c(r),u=_(t,n);return e.jsx(C,{...d,...l,ref:u})});G.displayName=B;var _e=({contentRef:a})=>{const t=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${F}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{var l;document.getElementById((l=a.current)==null?void 0:l.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},Ce=T,Re=O,Pe=I,Te=$,Oe=z,Ie=G,$e=M,ke=L;function Me({...a}){return e.jsx(Ce,{"data-slot":"alert-dialog",...a})}function Fe({...a}){return e.jsx(Re,{"data-slot":"alert-dialog-portal",...a})}function Le({className:a,...t}){return e.jsx(Pe,{"data-slot":"alert-dialog-overlay",className:x("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function ze({className:a,...t}){return e.jsxs(Fe,{children:[e.jsx(Le,{}),e.jsx(Te,{"data-slot":"alert-dialog-content",className:x("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...t})]})}function Be({className:a,...t}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:x("flex flex-col gap-2 text-center sm:text-left",a),...t})}function Ge({className:a,...t}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:x("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...t})}function He({className:a,...t}){return e.jsx($e,{"data-slot":"alert-dialog-title",className:x("text-lg font-semibold",a),...t})}function We({className:a,...t}){return e.jsx(ke,{"data-slot":"alert-dialog-description",className:x("text-muted-foreground text-sm",a),...t})}function qe({className:a,...t}){return e.jsx(Oe,{className:x(R(),a),...t})}function Ke({className:a,...t}){return e.jsx(Ie,{className:x(R({variant:"outline"}),a),...t})}const A=[{name:"蓝色",value:"hsl(var(--primary))"},{name:"绿色",value:"hsl(142, 76%, 36%)"},{name:"橙色",value:"hsl(24, 95%, 53%)"},{name:"紫色",value:"hsl(262, 83%, 58%)"},{name:"红色",value:"hsl(0, 84%, 60%)"},{name:"青色",value:"hsl(189, 85%, 46%)"}];function Ue({onCategoriesChange:a}){const[t,r]=o.useState([]),[l,n]=o.useState(!1),[d,u]=o.useState(null),[p,f]=o.useState(null),[i,m]=o.useState(""),[N,j]=o.useState(A[0].value);o.useEffect(()=>{H()},[]);const H=()=>{r(ce())},w=()=>{if(!i.trim()){D.error("请输入类别名称");return}const s={id:Date.now().toString(),name:i.trim(),color:N,createdAt:new Date().toISOString()},g=[...t,s];r(g),y(g),m(""),j(A[0].value),D.success("类别已添加"),a==null||a()},S=()=>{if(!d||!i.trim()){D.error("请输入类别名称");return}const s=t.map(g=>g.id===d.id?{...g,name:i.trim(),color:N}:g);r(s),y(s),u(null),m(""),j(A[0].value),D.success("类别已更新"),a==null||a()},W=()=>{if(!p)return;const s=t.filter(g=>g.id!==p.id);r(s),y(s),f(null),D.success("类别已删除"),a==null||a()},q=s=>{u(s),m(s.name),j(s.color)},K=()=>{u(null),m(""),j(A[0].value)};return e.jsxs(e.Fragment,{children:[e.jsxs(de,{open:l,onOpenChange:n,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(v,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xl:inline",children:"类别管理"})]})}),e.jsxs(pe,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsxs(me,{children:[e.jsx(ge,{children:"类别管理"}),e.jsx(xe,{children:"创建和管理任务类别"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"category-name",children:"类别名称"}),e.jsx(fe,{id:"category-name",value:i,onChange:s=>m(s.target.value),placeholder:"例如：工作、学习、生活",onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),d?S():w())}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"颜色"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(s=>e.jsx("button",{type:"button",onClick:()=>j(s.value),className:`w-8 h-8 rounded-full border-2 transition-all ${N===s.value?"border-foreground scale-110":"border-border hover:scale-105"}`,style:{backgroundColor:s.value},title:s.name},s.value))})]}),d?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{onClick:S,className:"flex-1",children:"保存修改"}),e.jsx(v,{onClick:K,variant:"outline",children:"取消"})]}):e.jsxs(v,{onClick:w,className:"w-full gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"添加类别"]})]}),t.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"已有类别"}),e.jsx("div",{className:"space-y-2",children:e.jsx(J,{mode:"popLayout",children:t.map(s=>e.jsxs(Q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>q(s),children:e.jsx(U,{className:"h-3.5 w-3.5"})}),e.jsx(v,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>f(s),children:e.jsx(X,{className:"h-3.5 w-3.5"})})]})]},s.id))})})]}),t.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"还没有类别，创建第一个吧！"})]})]})]}),e.jsx(Me,{open:!!p,onOpenChange:s=>!s&&f(null),children:e.jsxs(ze,{children:[e.jsxs(Be,{children:[e.jsx(He,{children:"确认删除"}),e.jsxs(We,{children:["确定要删除类别「",p==null?void 0:p.name,"」吗？该类别下的任务不会被删除，但会失去类别标记。"]})]}),e.jsxs(Ge,{children:[e.jsx(Ke,{children:"取消"}),e.jsx(qe,{onClick:W,children:"删除"})]})]})})]})}export{Ue as default};
