import{j as e,i as m,e as f,n as x,A as N,m as b,R as D}from"./ui-vendor-k1DUerhC.js";import{r as n}from"./react-vendor-DrRc5Ab8.js";import{D as y,e as w,B as l,a as T,b as k,c as C,d as A,k as R,l as d,t as o}from"./index-BmCEqgsS.js";function S({onRestore:h}){const[i,u]=n.useState(!1),[a,r]=n.useState([]),g=()=>{r(R())};n.useEffect(()=>{i&&g()},[i]);const j=s=>{const t=a.filter(c=>c.id!==s.id);r(t),d(t),h(s),o.success("任务已恢复")},p=s=>{const t=a.filter(c=>c.id!==s);r(t),d(t),o.success("任务已永久删除")},v=()=>{r([]),d([]),o.success("回收站已清空")};return e.jsxs(y,{open:i,onOpenChange:u,children:[e.jsx(w,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"rounded-xl hover-lift border-border/50 bg-background/50 backdrop-blur-sm",children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"回收站 ",a.length>0&&`(${a.length})`]})}),e.jsxs(T,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto glass-card border-0",children:[e.jsxs(k,{children:[e.jsxs(C,{className:"flex items-center gap-2 text-2xl",children:[e.jsx(m,{className:"h-6 w-6 text-muted-foreground"}),"回收站"]}),e.jsx(A,{className:"text-base",children:"已删除的任务可以恢复或永久删除"})]}),e.jsx("div",{className:"space-y-4 mt-6",children:a.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(f,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"回收站是空的"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(l,{variant:"ghost",size:"sm",onClick:v,className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"清空回收站"]})}),e.jsx("div",{className:"space-y-2",children:e.jsx(N,{children:a.map((s,t)=>e.jsxs(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:t*.05},className:"flex items-center justify-between p-4 rounded-xl border bg-card/50 backdrop-blur-sm hover-lift group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground line-through",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:new Date(s.createdAt).toLocaleDateString("zh-CN")})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>j(s),className:"h-8 hover:bg-primary/10 hover:text-primary",children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"恢复"]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>p(s.id),className:"h-8 hover:bg-destructive/10 hover:text-destructive",children:[e.jsx(x,{className:"h-4 w-4 mr-1"}),"永久删除"]})]})]},s.id))})})]})})]})]})}export{S as default};
